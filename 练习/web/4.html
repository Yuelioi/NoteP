<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    iframe{
      height:350px;
    }
  </style>
</head>
<body>
<iframe src="https://player.bilibili.com/player.html?bvid=BV1D64y147eB&amp;page=1&amp;high_quality=1" width="100%" allowfullscreen="allowfullscreen"></iframe>
<iframe src="https://player.bilibili.com/player.html?bvid=BV1CJ41147bb&BV1cA411W75t&amp;page=1&amp;high_quality=1" width="100%" allowfullscreen="allowfullscreen"></iframe>
<iframe src="https://player.bilibili.com/player.html?bvid=BV1CJ41147bb&amp;page=1&amp;high_quality=1" width="100%" allowfullscreen="allowfullscreen"></iframe>

<script>
const reg_page = /(?<=page=)[0-9]{1,3}/gm;
const reg_bvid = /(?<=bvid=).+?(?=&)/gm;


// 遍历视频
let videos = document.getElementsByTagName("iframe");

for(let i=0;i<videos.length;i++){
    let v = videos[i];

    if(v.src.indexOf("html5") + 1){
        continue;
    }

    let paramsString = v.src.split("?")[1];
    var searchParams = new URLSearchParams(paramsString);

    let bvid = searchParams.has("bvid")?searchParams.get("bvid"):flase;
    let page = searchParams.has("page")?searchParams.get("page"):1;

    // 如果iframe 没有BV号,直接跳过
    if (!bvid){
      continue;
    }
    v.src = `https://www.bilibili.com/blackboard/html5player.html?bvid=${bvid}&p=${page}&high_quality=1`;
}
</script>
</body>
</html>


let paramsString =
var searchParams = new URLSearchParams(paramsString);